{"version":3,"file":"apiFabric.modern.js","sources":["../src/config/index.js","../src/apiFabric.js"],"sourcesContent":["export default {\n    DOCS_URL: 'http://docs.dstack.ai',\n\n    LOGIN_URL: '/users/login',\n    VERIFY_EMAIL_URL: '/users/verify',\n    SUPPORT_URL: '/support/submit',\n    SIGN_UP_URL: '/users/register',\n    RESET_PASSWORD_URL: '/users/reset',\n    UPDATE_PASSWORD_URL: '/users/update/password',\n\n    USER_DATA_URL: '/users/remember',\n    UPDATE_TOKEN_URL: '/users/update/token',\n    UPDATE_SETTINGS_URL: '/users/update/settings',\n    CHECK_USER: userName => `/users/exists/${userName}`,\n\n    STACKS_LIST: userName => `/stacks/${userName}`,\n    DELETE_STACK: () => '/stacks/delete',\n    STACK_DETAILS: (userName, stack) => `/stacks/${userName}/${stack}`,\n    STACK_FRAME: (userName, stack, frameId) => `/frames/${userName}/${stack}/${frameId}`,\n    STACK_ATTACHMENT: (stack, frameId, id) => `/attachs/${stack}/${frameId}/${id}`,\n    STACK_UPDATE: '/stacks/update',\n    STACK_PUSH: '/stacks/push',\n\n    DASHBOARD_LIST: userName => `/dashboards/${userName}`,\n    DASHBOARD_DETAILS: (userName, id) => `/dashboards/${userName}/${id}`,\n    DASHBOARD_CREATE: '/dashboards/create',\n    DASHBOARD_UPDATE: '/dashboards/update',\n    DASHBOARD_DELETE: '/dashboards/delete',\n    DASHBOARD_CARDS_INSERT: '/dashboards/cards/insert',\n    DASHBOARD_CARDS_UPDATE: '/dashboards/cards/update',\n    DASHBOARD_CARDS_DELETE: '/dashboards/cards/delete',\n\n    JOB_LIST: userName => `/jobs/${userName}`,\n    JOB_DETAILS: (userName, id) => `/jobs/${userName}/${id}`,\n    JOB_CREATE: '/jobs/create',\n    JOB_UPDATE: '/jobs/update',\n    JOB_DELETE: '/jobs/delete',\n    JOB_RUN: '/jobs/run',\n    JOB_STOP: '/jobs/stop',\n\n    DISCORD_URL: 'https://discord.gg/8xfhEYa',\n    TWITTER_URL: 'https://twitter.com/dstackai',\n    GITHUB_URL: 'https://github.com/dstackai',\n    BLOG_URL: 'https://blog.dstack.ai',\n\n    TOKEN_STORAGE_KEY: 'token',\n};\n\nexport const reportPlotPythonCode = `import matplotlib.pyplot as plt\nimport dstack as ds\n\nfig = plt.figure()\nplt.plot([1, 2, 3, 4], [1, 4, 9, 16])\n\nds.push_frame(\"simple\", fig, \"My first plot\")`;\n\nexport const installRPackageCode = 'install.packages(\"dstack\")';\n\nexport const reportPlotRCode = `library(ggplot2)\nlibrary(dstack)\n\ndf <- data.frame(x = c(1, 2, 3, 4), y = c(1, 4, 9, 16))\nimage <- ggplot(data = df, aes(x = x, y = y)) + geom_line()\n\npush_frame(\"simple\", image, \"My first plot\")`;\n","import axios from 'axios';\nimport {get as _get} from 'lodash-es';\nimport config from './config';\n\nconst apiFabric = ({apiUrl} = {}) => {\n    const CancelToken = axios.CancelToken;\n\n    const instance = axios.create({\n        baseURL: apiUrl,\n        crossDomain: true,\n    });\n\n    instance.cancelToken = CancelToken;\n\n    instance.interceptors.request.use(requestConfig => {\n        const token = localStorage.getItem(config.TOKEN_STORAGE_KEY);\n\n        requestConfig.headers.Authorization = token ? `Bearer ${token}` : '';\n        return requestConfig;\n    });\n\n    instance.interceptors.response.use(\n        response => {\n            return response;\n        },\n        error => {\n            if (_get(error, 'response.status', null) === 401) {\n                return Promise.reject(error.response);\n            } else if (_get(error, 'response.status', null) === 400) {\n                return Promise.reject(error.response);\n            } else {\n                return Promise.reject(error);\n            }\n        }\n    );\n\n    return instance;\n};\n\nexport default apiFabric;\n\n"],"names":["DOCS_URL","LOGIN_URL","VERIFY_EMAIL_URL","SUPPORT_URL","SIGN_UP_URL","RESET_PASSWORD_URL","UPDATE_PASSWORD_URL","USER_DATA_URL","UPDATE_TOKEN_URL","UPDATE_SETTINGS_URL","CHECK_USER","userName","STACKS_LIST","DELETE_STACK","STACK_DETAILS","stack","STACK_FRAME","frameId","STACK_ATTACHMENT","id","STACK_UPDATE","STACK_PUSH","DASHBOARD_LIST","DASHBOARD_DETAILS","DASHBOARD_CREATE","DASHBOARD_UPDATE","DASHBOARD_DELETE","DASHBOARD_CARDS_INSERT","DASHBOARD_CARDS_UPDATE","DASHBOARD_CARDS_DELETE","JOB_LIST","JOB_DETAILS","JOB_CREATE","JOB_UPDATE","JOB_DELETE","JOB_RUN","JOB_STOP","DISCORD_URL","TWITTER_URL","GITHUB_URL","BLOG_URL","TOKEN_STORAGE_KEY","apiFabric","apiUrl","CancelToken","axios","instance","create","baseURL","crossDomain","cancelToken","interceptors","request","use","requestConfig","token","localStorage","getItem","config","headers","Authorization","response","error","_get","Promise","reject"],"mappings":"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"}