{"version":3,"file":"utils.modern.js","sources":["../src/utils/parseSearch.js","../src/utils/getDataFailedRequest.js","../src/utils/unicodeBase64Decode.js","../src/utils/formatBytesSize.js","../src/utils/downloadFile.js","../src/utils/parseStackParams.js","../src/utils/parseStackTabs.js","../src/utils/getFormattedDuration.js","../src/utils/fileToBaseTo64.js","../src/config/index.js","../src/utils/dataFetcher.js","../src/utils.js"],"sourcesContent":["const parseSearch = searchString => {\n    const search = searchString.substring(1);\n\n    let params = {};\n\n    if (!search.length)\n        return params;\n\n    try {\n        params = JSON.parse(\n            '{\"'\n            + decodeURIComponent(search).replace(/\"/g, '\\\\\"')\n                .replace(/&/g, '\",\"')\n                .replace(/=/g, '\":\"')\n            + '\"}');\n    } catch (e) {\n        params = {};\n    }\n\n    return params;\n};\n\nexport default parseSearch;","import {get as _get} from 'lodash-es';\n\nconst getDataFailedRequest = responseError => {\n    let error = 'Unknown error';\n\n    try {\n        error = JSON.parse(_get(responseError, 'request.response')).message;\n    } catch (e) {\n        console.log(error, e);\n    }\n\n    const requestStatus = _get(responseError, 'request.status');\n\n    return {error, requestStatus};\n};\n\nexport default getDataFailedRequest;","const unicodeBase64Decode = text => {\n    try {\n        const decodeData = window.atob(text);\n\n        return decodeURIComponent(Array.prototype.map.call(decodeData, c => {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n    } catch (e) {\n        return null;\n    }\n};\n\nexport default unicodeBase64Decode;","const formatBytes = (bytes, decimals) => {\n    if (bytes === 0) return '0 Bytes';\n    \n    let k = 1024;\n\n    let dm = decimals <= 0 ? 0 : decimals || 2;\n\n    let sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n    let i = Math.floor(Math.log(bytes) / Math.log(k));\n    \n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n};\n\nexport default formatBytes;","const downloadFile = ({url, blob, type, fileName}) => {\n    if (blob) {\n        const\n            link = document.createElement('a');\n\n        link.href = window.URL.createObjectURL(new Blob([blob]));\n        link.setAttribute('target', '_blank');\n        link.setAttribute('download', fileName);\n        link.setAttribute('type', type);\n\n        document.body.appendChild(link);\n        link.click();\n        link.parentNode.removeChild(link);\n    }\n\n    if (url) {\n        const\n            link = document.createElement('a');\n\n        link.href = url;\n        link.setAttribute('target', '_blank');\n        link.setAttribute('download', true);\n\n        document.body.appendChild(link);\n        link.click();\n        link.parentNode.removeChild(link);\n    }\n};\n\nexport default downloadFile;","export default attachments => {\n    const fields = {};\n\n    if (!attachments || !attachments.length)\n        return;\n\n    attachments.forEach(i => {\n        Object.keys(i.params).forEach(key => {\n            if (i.params[key] instanceof Object)\n                return;\n\n            if (fields[key])\n                fields[key].options.push(i.params[key]);\n            else\n                fields[key] = {options: [i.params[key]]};\n        });\n    });\n\n    Object.keys(fields).forEach(key => {\n        if (typeof fields[key].options[0] === 'string') {\n            fields[key].type = 'select';\n\n            fields[key].options = fields[key].options\n                .filter((a, b) => fields[key].options.indexOf(a) === b)\n                .map(i => ({\n                    label: i,\n                    value: i,\n                }));\n        }\n\n        if (typeof fields[key].options[0] === 'boolean') {\n            fields[key].type = 'checkbox';\n        }\n\n        if (typeof fields[key].options[0] === 'number') {\n            const options = fields[key].options;\n\n            fields[key].type = 'slider';\n            fields[key].min = Math.min.apply(null, options);\n            fields[key].max = Math.max.apply(null, options);\n\n            fields[key].options = {};\n\n            options\n                .filter((a, b) => options.indexOf(a) === b)\n                .forEach(i => fields[key].options[i] = i);\n        }\n    });\n\n    return fields;\n};\n","export default attachments => {\n    const tabs = [];\n\n    if (!attachments || !attachments.length)\n        return;\n\n    attachments.forEach(i => {\n        Object.keys(i.params).forEach(key => {\n            if (i.params[key] instanceof Object\n                && i.params[key].type === 'tab'\n            ) {\n                const tab = i.params[key].title || key;\n\n                if (!tabs.find(i => i.value === tab))\n                    tabs.push({\n                        label: tab,\n                        value: tab,\n                        key,\n                    });\n            }\n        });\n    });\n\n    return tabs;\n};\n","import moment from 'moment';\n\nexport default duration => {\n    if (duration < 1000)\n        return '0sec';\n\n    let string = '';\n\n    const momentDuration = moment.duration(duration);\n    const hours = momentDuration.hours();\n    const minutes = momentDuration.minutes();\n    const seconds = momentDuration.seconds();\n\n    if (hours)\n        string += `${moment.duration(hours, 'hours').as('hours')}h`;\n\n    if (minutes)\n        string += ` ${moment.duration(minutes, 'minutes').as('minutes')}min`;\n\n    if (seconds)\n        string += ` ${moment.duration(seconds, 'seconds').asSeconds()}sec`;\n\n    return string;\n};","const fileToBase64 = async file => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result.split(',')[1]);\n    reader.onerror = error => reject(error);\n});\n\nexport default fileToBase64;","export default {\n    DOCS_URL: 'http://docs.dstack.ai',\n\n    LOGIN_URL: '/users/login',\n    VERIFY_EMAIL_URL: '/users/verify',\n    SUPPORT_URL: '/support/submit',\n    SIGN_UP_URL: '/users/register',\n    RESET_PASSWORD_URL: '/users/reset',\n    UPDATE_PASSWORD_URL: '/users/update/password',\n\n    USER_DATA_URL: '/users/remember',\n    UPDATE_TOKEN_URL: '/users/update/token',\n    UPDATE_SETTINGS_URL: '/users/update/settings',\n    CHECK_USER: userName => `/users/exists/${userName}`,\n\n    STACKS_LIST: userName => `/stacks/${userName}`,\n    DELETE_STACK: () => '/stacks/delete',\n    STACK_DETAILS: (userName, stack) => `/stacks/${userName}/${stack}`,\n    STACK_FRAME: (userName, stack, frameId) => `/frames/${userName}/${stack}/${frameId}`,\n    STACK_ATTACHMENT: (stack, frameId, id) => `/attachs/${stack}/${frameId}/${id}`,\n    STACK_UPDATE: '/stacks/update',\n    STACK_PUSH: '/stacks/push',\n\n    DASHBOARD_LIST: userName => `/dashboards/${userName}`,\n    DASHBOARD_DETAILS: (userName, id) => `/dashboards/${userName}/${id}`,\n    DASHBOARD_CREATE: '/dashboards/create',\n    DASHBOARD_UPDATE: '/dashboards/update',\n    DASHBOARD_DELETE: '/dashboards/delete',\n    DASHBOARD_CARDS_INSERT: '/dashboards/cards/insert',\n    DASHBOARD_CARDS_UPDATE: '/dashboards/cards/update',\n    DASHBOARD_CARDS_DELETE: '/dashboards/cards/delete',\n\n    JOB_LIST: userName => `/jobs/${userName}`,\n    JOB_DETAILS: (userName, id) => `/jobs/${userName}/${id}`,\n    JOB_CREATE: '/jobs/create',\n    JOB_UPDATE: '/jobs/update',\n    JOB_DELETE: '/jobs/delete',\n    JOB_RUN: '/jobs/run',\n    JOB_STOP: '/jobs/stop',\n\n    DISCORD_URL: 'https://discord.gg/8xfhEYa',\n    TWITTER_URL: 'https://twitter.com/dstackai',\n    GITHUB_URL: 'https://github.com/dstackai',\n    BLOG_URL: 'https://blog.dstack.ai',\n\n    TOKEN_STORAGE_KEY: 'token',\n};\n\nexport const reportPlotPythonCode = `import matplotlib.pyplot as plt\nimport dstack as ds\n\nfig = plt.figure()\nplt.plot([1, 2, 3, 4], [1, 4, 9, 16])\n\nds.push_frame(\"simple\", fig, \"My first plot\")`;\n\nexport const installRPackageCode = 'install.packages(\"dstack\")';\n\nexport const reportPlotRCode = `library(ggplot2)\nlibrary(dstack)\n\ndf <- data.frame(x = c(1, 2, 3, 4), y = c(1, 4, 9, 16))\nimage <- ggplot(data = df, aes(x = x, y = y)) + geom_line()\n\npush_frame(\"simple\", image, \"My first plot\")`;\n","import axios from 'axios';\nimport {get as _get} from 'lodash-es';\nimport config from '../config';\n\nconst fetcher = async (url: string, responseDataFormat = data => data) => {\n    const token = localStorage.getItem(config.TOKEN_STORAGE_KEY);\n\n    try {\n        const request = await axios({\n            url: url,\n            headers: {Authorization: token ? `Bearer ${token}` : ''},\n        });\n\n        return responseDataFormat(request.data);\n    } catch (e) {\n        let errorBody = null;\n\n        let status = null;\n\n        try {\n            errorBody = JSON.parse(_get(e, 'request.response'));\n        } catch (e) {\n            console.log(e);\n        }\n\n        try {\n            status = _get(e, 'request.status');\n        } catch (e) {\n            console.log(e);\n        }\n\n        const error = new Error('An error occurred while fetching the data.');\n\n        error.info = errorBody;\n        error.status = status;\n        throw error;\n    }\n};\n\nexport default fetcher;\n","import parseSearch from './utils/parseSearch';\nimport getDataFailedRequest from './utils/getDataFailedRequest';\nimport unicodeBase64Decode from './utils/unicodeBase64Decode';\nimport formatBytes from './utils/formatBytesSize';\nimport downloadFile from './utils/downloadFile';\nimport parseStackParams from './utils/parseStackParams';\nimport parseStackTabs from './utils/parseStackTabs';\nimport getFormattedDuration from './utils/getFormattedDuration';\nimport fileToBaseTo64 from './utils/fileToBaseTo64';\nimport dataFetcher from './utils/dataFetcher';\nimport config from './config';\n\nconst isSignedIn = () => {\n    const token = localStorage.getItem(config.TOKEN_STORAGE_KEY);\n\n    return Boolean(token && token.length);\n};\n\nexport {\n    isSignedIn,\n    downloadFile,\n    formatBytes,\n    parseSearch,\n    getDataFailedRequest,\n    unicodeBase64Decode,\n    parseStackParams,\n    parseStackTabs,\n    getFormattedDuration,\n    fileToBaseTo64,\n    dataFetcher\n};\n"],"names":["parseSearch","searchString","search","substring","params","length","JSON","parse","decodeURIComponent","replace","e","getDataFailedRequest","responseError","error","_get","message","console","log","requestStatus","unicodeBase64Decode","text","decodeData","window","atob","Array","prototype","map","call","c","charCodeAt","toString","slice","join","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","parseFloat","pow","toFixed","downloadFile","url","blob","type","fileName","link","document","createElement","href","URL","createObjectURL","Blob","setAttribute","body","appendChild","click","parentNode","removeChild","attachments","fields","forEach","Object","keys","key","options","push","filter","a","b","indexOf","label","value","min","apply","max","tabs","tab","title","find","duration","string","momentDuration","moment","hours","minutes","seconds","as","asSeconds","fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","split","onerror","DOCS_URL","LOGIN_URL","VERIFY_EMAIL_URL","SUPPORT_URL","SIGN_UP_URL","RESET_PASSWORD_URL","UPDATE_PASSWORD_URL","USER_DATA_URL","UPDATE_TOKEN_URL","UPDATE_SETTINGS_URL","CHECK_USER","userName","STACKS_LIST","DELETE_STACK","STACK_DETAILS","stack","STACK_FRAME","frameId","STACK_ATTACHMENT","id","STACK_UPDATE","STACK_PUSH","DASHBOARD_LIST","DASHBOARD_DETAILS","DASHBOARD_CREATE","DASHBOARD_UPDATE","DASHBOARD_DELETE","DASHBOARD_CARDS_INSERT","DASHBOARD_CARDS_UPDATE","DASHBOARD_CARDS_DELETE","JOB_LIST","JOB_DETAILS","JOB_CREATE","JOB_UPDATE","JOB_DELETE","JOB_RUN","JOB_STOP","DISCORD_URL","TWITTER_URL","GITHUB_URL","BLOG_URL","TOKEN_STORAGE_KEY","fetcher","responseDataFormat","data","token","localStorage","getItem","config","request","axios","headers","Authorization","errorBody","status","Error","info","isSignedIn","Boolean"],"mappings":"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"}